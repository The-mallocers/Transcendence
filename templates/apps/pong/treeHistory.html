{% load static %}

<style>
    .treePage {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .treePage .controls-card {
        width: 100%;
        max-width: 800px;
        background-color: white;
        border: rgb(228, 228, 228) 1px solid;
        border-radius: 20px;
        padding: 0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

    .treePage .controls-card .card-header {
        background-color: #f8f9fa;
        border-bottom: 1px solid #dee2e6;
        border-radius: 20px 20px 0 0;
        padding: 15px 25px;
    }

    .treePage .controls-card .card-body {
        padding: 20px 25px;
    }

    .treePage .round {
        width: 100%;
        max-width: 800px;
        background-color: white;
        border: rgb(228, 228, 228) 1px solid;
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
    }

    .treePage .players {
        display: flex;
        align-items: center;
        justify-content: space-evenly;
        padding: 20px 100px;
    }

    .treePage .players .left, .treePage .players .right {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 8px;
    }

    .treePage .players img {
        height: 40px;
        width: 40px;
        border-radius: 50%;
        object-fit: cover;
    }

    .treePage .players .vs {
        font-weight: bold;
        color: #6c757d;
        font-size: 1.1rem;
    }

    .treePage th {
        vertical-align: middle;
        text-align: center;
        background-color: #f8f9fa;
        border-top: none;
    }

    .treePage td {
        vertical-align: middle;
        text-align: center;
        padding: 25px;
        border-top: 1px solid #dee2e6;
    }

    .treePage .winner {
        color: #28a745;
        font-weight: bold;
    }

    .treePage .loser {
        color: #dc3545;
    }

    .treePage .badge {
        font-size: 0.9rem;
        padding: 6px 12px;
    }

    .treePage .table {
        margin-bottom: 0;
    }

    .treePage .table thead th {
        border-bottom: 2px solid #dee2e6;
    }

    #controls-card-fixed {
        position: sticky;
        top: 0;
        z-index: 100;
        background: white; /* Or your card background color */
        box-shadow: 0 2px 8px rgba(0,0,0,0.04); /* Optional, for visual separation */
        border-radius: 0 0 8px 8px; /* Optional, if you want rounded edges only at bottom */
    }

    @media (max-width: 768px) {
        .treePage {
            padding: 10px;
        }

        .treePage .players {
            padding: 15px 20px;
        }

        .treePage .controls-card .card-body .btns {
            flex-direction: column;
            gap: 10px;
        }

        .treePage .controls-card .card-body .btns .btn {
            width: 100%;
        }
    }
</style>

<div id="tree" class="treePage d-flex flex-column justify-content-center align-items-center">
    
</div>


<script>const test = `{
    "code": "1BHFY",
    "host": "cf87f1d8-58b7-4b63-8c05-664cfb07dc96",
    "title": "iweufh&#x27;s room",
    "game_ready": false,
    "scoreboard": {
      "rounds": {
        "round_1": {
          "games": {
            "r1m1": {
              "status": "finished",
              "game_code": "DEBC7",
              "loser_score": 0,
              "winner_score": 3,
              "loser_picture": "/static/assets/imgs/profile/default.png",
              "loser_username": "miaou",
              "winner_picture": "/static/assets/imgs/profile/default.png",
              "playerL_picture": "/static/assets/imgs/profile/default.png",
              "playerR_picture": "/static/assets/imgs/profile/default.png",
              "winner_username": "tfreydie",
              "playerL_username": "tfreydie",
              "playerR_username": "miaou"
            },
            "r1m2": {
              "status": "finished",
              "game_code": "1V0J1",
              "loser_score": 0,
              "winner_score": 3,
              "loser_picture": "/static/assets/imgs/profile/default.png",
              "loser_username": "matboyer",
              "winner_picture": "/static/assets/imgs/profile/default.png",
              "playerL_picture": "/static/assets/imgs/profile/default.png",
              "playerR_picture": "/static/assets/imgs/profile/default.png",
              "winner_username": "iweufh",
              "playerL_username": "matboyer",
              "playerR_username": "iweufh"
            }
          },
          "matches_total": 2,
          "matches_completed": 2
        },
        "round_2": {
          "games": {
            "r2m1": {
              "status": "finished",
              "game_code": "ZPGQP",
              "loser_score": 0,
              "winner_score": 3,
              "loser_picture": "/static/assets/imgs/profile/default.png",
              "loser_username": "iweufh",
              "winner_picture": "/static/assets/imgs/profile/default.png",
              "playerL_picture": "/static/assets/imgs/profile/default.png",
              "playerR_picture": "/static/assets/imgs/profile/default.png",
              "winner_username": "tfreydie",
              "playerL_username": "tfreydie",
              "playerR_username": "iweufh"
            }
          },
          "matches_total": 1,
          "matches_completed": 0
        }
      },
      "num_rounds": 2,
      "current_round": 2
    },
    "max_clients": 4,
    "players_infos": [
      {
        "id": "bd0cf2b0-0ca1-4be6-aae1-93626acff4d6",
        "mmr": 125,
        "avatar": "/static/assets/imgs/profile/default.png",
        "trophee": "/static/assets/imgs/rank_icon/silver.png",
        "nickname": "tfreydie"
      },
      {
        "id": "cf87f1d8-58b7-4b63-8c05-664cfb07dc96",
        "mmr": 68,
        "avatar": "/static/assets/imgs/profile/default.png",
        "trophee": "/static/assets/imgs/rank_icon/bronze.png",
        "nickname": "iweufh"
      }
    ]
  }`;
  
  window.treeInfos = {{ roomInfos|safe }};
  </script>
<script type="module" src="{% static '/js/tournaments/treeQuery.js' %}"></script>
<!-- <script type="module" src="{% static '/js/tournaments/tournamentRoom.js' %}"></script>  -->